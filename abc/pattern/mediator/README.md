# 中介者模式 (Mediator Pattern)

## 概述

中介者模式是一种行为型设计模式，它通过封装一系列对象之间的交互方式，来降低对象之间的耦合度。该模式通过引入一个中介者对象，让所有的交互都通过这个中介者对象来进行，而各个对象不再直接互相引用。

## 适用场景

- 当对象之间的交互操作很多且复杂，导致对象之间的关系混乱难以维护时
- 当想创建一个可复用的组件，但是组件间的通信操作会导致组件之间产生过度耦合时
- 当需要一个中心化的控制点来协调多个对象的交互行为时

## 优点

1. 减少了对象之间的直接依赖关系，降低了系统的耦合度
2. 简化了对象之间的交互协议，将多对多的关系转变为多对一的关系
3. 便于控制和管理对象之间的交互
4. 使各个组件可以相对独立地复用

## 缺点

1. 中介者对象可能会变得过于复杂，成为一个"上帝类"
2. 随着系统规模的增大，中介者的复杂度会迅速增加

## 本示例实现

本示例模拟了一个聊天室系统：

1. `Mediator`接口定义了中介者应该具备的功能
2. `Colleague`接口定义了同事类应该具备的功能
3. `ChatRoom`是一个具体的中介者实现，代表聊天室
4. `User`是一个具体的同事类实现，代表用户
5. `AdminUser`是`User`的一个特殊扩展，代表管理员用户
6. `MonitoredChatRoom`是`ChatRoom`的一个扩展，添加了消息记录功能

### 类图关系

```
[Mediator接口] <---- [ChatRoom] <---- [MonitoredChatRoom]
     ^                    ^
     |                    |
     |                    |
[Colleague接口] <---- [User] <---- [AdminUser]
```

### 运行方式

```bash
cd common/design_patterns/mediator/main
go run main.go
```

## 中介者模式与其他模式的区别

1. **观察者模式**：观察者模式中，观察者直接订阅主题，而中介者模式中，组件之间通过中介者来通信
2. **外观模式**：外观模式简化了客户端与子系统之间的通信，而中介者模式简化了子系统间的通信
3. **命令模式**：命令模式通常用于封装请求为对象，而中介者模式用于解耦对象之间的交互 